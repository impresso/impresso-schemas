{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://impresso.github.io/impresso-schemas/json/embeddings/embeddings-chunks.schema.json",
  "type": "object",
  "description": "Schema for validation of the chunk embeddings as produced by GTE",
  "required": [
    "ts",
    "ci_id",
    "chunks"
  ],
  "definitions": {
    "chunks": {
      "type": "array",
      "title": "Chunk Embeddings",
      "description": "Container for chunk-level embeddings derived from lingproc chunk segmentation and chonkie",
      "items": {
        "type": "object",
        "title": "Chunk Embedding",
        "required": [
          "embedding",
          "chunk_id"
        ],
        "properties": {
          "lg": {
            "type": "string",
            "description": "the two-letter ISO language identifier produced by lingproc",
            "examples": [
              "de"
            ]
          },
          "chunk_id": {
            "type": "integer",
            "description": "Index of the chunk in the chunk array produced by chonkie, based on lingproc segmentation.",
            "examples": [
              0,
              1,
              2
            ]
          },
          "embedding": {
            "type": "array",
            "description": "The vector embedding representation of the chunk.",
            "items": {
              "type": "number",
              "description": "A single number in the chunk's vector embedding.",
              "examples": [
                -0.11429
              ]
            }
          },
          "size": {
            "type": "integer",
            "description": "The size of the embedding vector."
          },
          "o": {
            "type": "integer",
            "description": "Character offset where the chunk begins in the original text."
          }
        }
      }
    }
  },
  "properties": {
    "ts": {
      "$id": "#/properties/ts",
      "type": "string",
      "title": "Timestamp",
      "description": "Timestamp of when the embeddings were generated.",
      "examples": [
        "2024-12-27T16:38:46Z"
      ],
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z$"
    },
    "ci_id": {
      "$id": "#/properties/ci_id",
      "type": "string",
      "title": "Content Item ID",
      "description": "Canonical impresso ID of the content item.",
      "examples": [
        "onsjongen-1951-03-01-a-i0012"
      ]
    },
    "chunks": {
      "$ref": "#/definitions/chunks"
    },
    "model_id": {
      "type": "string",
      "title": "Model ID",
      "description": "Model identifier according to impresso model description schema.",
      "examples": [
        "gte-multilingual-base_v1.0.0"
      ]
    },
    "lingproc_path": {
      "type": "string",
      "title": "Linguistic Processing Path",
      "description": "S3 path to the lingproc output from which chunk boundaries were derived and subsequently processed through chonkie.",
      "examples": [
        "s3://142-processed-data-final/embeddings/chunks/chunks_gte_v1-0-0/onsjongen/onsjongen-1951-chunk-embeddings.jsonl.bz2"
      ]
    },
    "git": {
      "type": "string",
      "title": "Git Commit",
      "description": "Git commit or tag of the processing pipeline used to generate the embeddings.",
      "examples": [
        "01fef5"
      ]
    }
  }
}